{"ast":null,"code":"!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define([], t) : \"object\" == typeof exports ? exports.UpChunk = t() : e.UpChunk = t();\n}(this, function () {\n  return function (e) {\n    var t = {};\n\n    function n(r) {\n      if (t[r]) return t[r].exports;\n      var o = t[r] = {\n        i: r,\n        l: !1,\n        exports: {}\n      };\n      return e[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports;\n    }\n\n    return n.m = e, n.c = t, n.d = function (e, t, r) {\n      n.o(e, t) || Object.defineProperty(e, t, {\n        enumerable: !0,\n        get: r\n      });\n    }, n.r = function (e) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n    }, n.t = function (e, t) {\n      if (1 & t && (e = n(e)), 8 & t) return e;\n      if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n      var r = Object.create(null);\n      if (n.r(r), Object.defineProperty(r, \"default\", {\n        enumerable: !0,\n        value: e\n      }), 2 & t && \"string\" != typeof e) for (var o in e) n.d(r, o, function (t) {\n        return e[t];\n      }.bind(null, o));\n      return r;\n    }, n.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return n.d(t, \"a\", t), t;\n    }, n.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, n.p = \"\", n(n.s = 0);\n  }([function (e, t, n) {\n    \"use strict\";\n\n    var r = this && this.__assign || function () {\n      return (r = Object.assign || function (e) {\n        for (var t, n = 1, r = arguments.length; n < r; n++) for (var o in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);\n\n        return e;\n      }).apply(this, arguments);\n    };\n\n    t.__esModule = !0, t.createUpload = t.UpChunk = void 0;\n\n    var o = n(1),\n        i = n(2),\n        s = [200, 201, 202, 204, 308],\n        u = [408, 502, 503, 504],\n        a = function () {\n      function e(e) {\n        var t = this;\n        this.endpoint = e.endpoint, this.file = e.file, this.headers = e.headers || {}, this.method = e.method || \"PUT\", this.chunkSize = e.chunkSize || 5120, this.attempts = e.attempts || 5, this.delayBeforeAttempt = e.delayBeforeAttempt || 1, this.maxFileBytes = 1024 * (e.maxFileSize || 0), this.chunkCount = 0, this.chunkByteSize = 1024 * this.chunkSize, this.totalChunks = Math.ceil(this.file.size / this.chunkByteSize), this.attemptCount = 0, this.offline = !1, this.paused = !1, this.success = !1, this.reader = new FileReader(), this.eventTarget = new o.EventTarget(), this.validateOptions(), this.getEndpoint().then(function () {\n          return t.sendChunks();\n        }), \"undefined\" != typeof window && (window.addEventListener(\"online\", function () {\n          t.offline && (t.offline = !1, t.dispatch(\"online\"), t.sendChunks());\n        }), window.addEventListener(\"offline\", function () {\n          t.offline = !0, t.dispatch(\"offline\");\n        }));\n      }\n\n      return e.prototype.on = function (e, t) {\n        this.eventTarget.addEventListener(e, t);\n      }, e.prototype.abort = function () {\n        var e;\n        this.pause(), null === (e = this.currentXhr) || void 0 === e || e.abort();\n      }, e.prototype.pause = function () {\n        this.paused = !0;\n      }, e.prototype.resume = function () {\n        this.paused && (this.paused = !1, this.sendChunks());\n      }, e.prototype.dispatch = function (e, t) {\n        var n = new CustomEvent(e, {\n          detail: t\n        });\n        this.eventTarget.dispatchEvent(n);\n      }, e.prototype.validateOptions = function () {\n        if (!this.endpoint || \"function\" != typeof this.endpoint && \"string\" != typeof this.endpoint) throw new TypeError(\"endpoint must be defined as a string or a function that returns a promise\");\n        if (!(this.file instanceof File)) throw new TypeError(\"file must be a File object\");\n        if (this.headers && \"object\" != typeof this.headers) throw new TypeError(\"headers must be null or an object\");\n        if (this.chunkSize && (\"number\" != typeof this.chunkSize || this.chunkSize <= 0 || this.chunkSize % 256 != 0)) throw new TypeError(\"chunkSize must be a positive number in multiples of 256\");\n        if (this.maxFileBytes > 0 && this.maxFileBytes < this.file.size) throw new Error(\"file size exceeds maximum (\" + this.file.size + \" > \" + this.maxFileBytes + \")\");\n        if (this.attempts && (\"number\" != typeof this.attempts || this.attempts <= 0)) throw new TypeError(\"retries must be a positive number\");\n        if (this.delayBeforeAttempt && (\"number\" != typeof this.delayBeforeAttempt || this.delayBeforeAttempt < 0)) throw new TypeError(\"delayBeforeAttempt must be a positive number\");\n      }, e.prototype.getEndpoint = function () {\n        var e = this;\n        return \"string\" == typeof this.endpoint ? (this.endpointValue = this.endpoint, Promise.resolve(this.endpoint)) : this.endpoint(this.file).then(function (t) {\n          return e.endpointValue = t, e.endpointValue;\n        });\n      }, e.prototype.getChunk = function () {\n        var e = this;\n        return new Promise(function (t) {\n          var n = 1 === e.totalChunks ? e.file.size : e.chunkByteSize,\n              r = n * e.chunkCount;\n          e.reader.onload = function () {\n            null !== e.reader.result && (e.chunk = new Blob([e.reader.result], {\n              type: \"application/octet-stream\"\n            })), t();\n          }, e.reader.readAsArrayBuffer(e.file.slice(r, r + n));\n        });\n      }, e.prototype.xhrPromise = function (e) {\n        var t = this,\n            n = function (e) {\n          e.upload.onprogress = function (e) {\n            var n,\n                r = 100 / t.totalChunks,\n                o = r * t.file.size,\n                i = r * t.chunkCount,\n                s = e.loaded / (null !== (n = e.total) && void 0 !== n ? n : o) * r;\n            t.dispatch(\"progress\", Math.min(i + s, 100));\n          };\n        };\n\n        return new Promise(function (o, s) {\n          t.currentXhr = i.default(r(r({}, e), {\n            beforeSend: n\n          }), function (e, n) {\n            return t.currentXhr = void 0, e ? s(e) : o(n);\n          });\n        });\n      }, e.prototype.sendChunk = function () {\n        var e = this.chunkCount * this.chunkByteSize,\n            t = e + this.chunk.size - 1,\n            n = r(r({}, this.headers), {\n          \"Content-Type\": this.file.type,\n          \"Content-Range\": \"bytes \" + e + \"-\" + t + \"/\" + this.file.size\n        });\n        return this.dispatch(\"attempt\", {\n          chunkNumber: this.chunkCount,\n          chunkSize: this.chunk.size\n        }), this.xhrPromise({\n          headers: n,\n          url: this.endpointValue,\n          method: this.method,\n          body: this.chunk\n        });\n      }, e.prototype.manageRetries = function () {\n        var e = this;\n        if (this.attemptCount < this.attempts) return setTimeout(function () {\n          return e.sendChunks();\n        }, 1e3 * this.delayBeforeAttempt), void this.dispatch(\"attemptFailure\", {\n          message: \"An error occured uploading chunk \" + this.chunkCount + \". \" + (this.attempts - this.attemptCount) + \" retries left.\",\n          chunkNumber: this.chunkCount,\n          attemptsLeft: this.attempts - this.attemptCount\n        });\n        this.dispatch(\"error\", {\n          message: \"An error occured uploading chunk \" + this.chunkCount + \". No more retries, stopping upload\",\n          chunk: this.chunkCount,\n          attempts: this.attemptCount\n        });\n      }, e.prototype.sendChunks = function () {\n        var e = this;\n        this.paused || this.offline || this.success || this.getChunk().then(function () {\n          return e.sendChunk();\n        }).then(function (t) {\n          if (e.attemptCount = e.attemptCount + 1, s.includes(t.statusCode)) {\n            e.dispatch(\"chunkSuccess\", {\n              chunk: e.chunkCount,\n              attempts: e.attemptCount,\n              response: t\n            }), e.attemptCount = 0, e.chunkCount = e.chunkCount + 1, e.chunkCount < e.totalChunks ? e.sendChunks() : (e.success = !0, e.dispatch(\"success\"));\n            var n = 100 * (e.chunkCount / e.totalChunks * e.file.size) / e.file.size;\n            e.dispatch(\"progress\", n);\n          } else if (u.includes(t.statusCode)) {\n            if (e.paused || e.offline) return;\n            e.manageRetries();\n          } else {\n            if (e.paused || e.offline) return;\n            e.dispatch(\"error\", {\n              message: \"Server responded with \" + t.statusCode + \". Stopping upload.\",\n              chunkNumber: e.chunkCount,\n              attempts: e.attemptCount\n            });\n          }\n        }).catch(function (t) {\n          e.paused || e.offline || e.manageRetries();\n        });\n      }, e;\n    }();\n\n    t.UpChunk = a, t.createUpload = function (e) {\n      return new a(e);\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n    const r = new WeakMap(),\n          o = new WeakMap();\n\n    function i(e) {\n      const t = r.get(e);\n      return console.assert(null != t, \"'this' is expected an Event object, but got\", e), t;\n    }\n\n    function s(e) {\n      null == e.passiveListener ? e.event.cancelable && (e.canceled = !0, \"function\" == typeof e.event.preventDefault && e.event.preventDefault()) : \"undefined\" != typeof console && \"function\" == typeof console.error && console.error(\"Unable to preventDefault inside passive event listener invocation.\", e.passiveListener);\n    }\n\n    function u(e, t) {\n      r.set(this, {\n        eventTarget: e,\n        event: t,\n        eventPhase: 2,\n        currentTarget: e,\n        canceled: !1,\n        stopped: !1,\n        immediateStopped: !1,\n        passiveListener: null,\n        timeStamp: t.timeStamp || Date.now()\n      }), Object.defineProperty(this, \"isTrusted\", {\n        value: !1,\n        enumerable: !0\n      });\n      const n = Object.keys(t);\n\n      for (let e = 0; e < n.length; ++e) {\n        const t = n[e];\n        t in this || Object.defineProperty(this, t, a(t));\n      }\n    }\n\n    function a(e) {\n      return {\n        get() {\n          return i(this).event[e];\n        },\n\n        set(t) {\n          i(this).event[e] = t;\n        },\n\n        configurable: !0,\n        enumerable: !0\n      };\n    }\n\n    function p(e) {\n      return {\n        value() {\n          const t = i(this).event;\n          return t[e].apply(t, arguments);\n        },\n\n        configurable: !0,\n        enumerable: !0\n      };\n    }\n\n    function c(e) {\n      if (null == e || e === Object.prototype) return u;\n      let t = o.get(e);\n      return null == t && (t = function (e, t) {\n        const n = Object.keys(t);\n        if (0 === n.length) return e;\n\n        function r(t, n) {\n          e.call(this, t, n);\n        }\n\n        r.prototype = Object.create(e.prototype, {\n          constructor: {\n            value: r,\n            configurable: !0,\n            writable: !0\n          }\n        });\n\n        for (let o = 0; o < n.length; ++o) {\n          const i = n[o];\n\n          if (!(i in e.prototype)) {\n            const e = \"function\" == typeof Object.getOwnPropertyDescriptor(t, i).value;\n            Object.defineProperty(r.prototype, i, e ? p(i) : a(i));\n          }\n        }\n\n        return r;\n      }(c(Object.getPrototypeOf(e)), e), o.set(e, t)), t;\n    }\n\n    function l(e) {\n      return i(e).immediateStopped;\n    }\n\n    function f(e, t) {\n      i(e).passiveListener = t;\n    }\n\n    u.prototype = {\n      get type() {\n        return i(this).event.type;\n      },\n\n      get target() {\n        return i(this).eventTarget;\n      },\n\n      get currentTarget() {\n        return i(this).currentTarget;\n      },\n\n      composedPath() {\n        const e = i(this).currentTarget;\n        return null == e ? [] : [e];\n      },\n\n      get NONE() {\n        return 0;\n      },\n\n      get CAPTURING_PHASE() {\n        return 1;\n      },\n\n      get AT_TARGET() {\n        return 2;\n      },\n\n      get BUBBLING_PHASE() {\n        return 3;\n      },\n\n      get eventPhase() {\n        return i(this).eventPhase;\n      },\n\n      stopPropagation() {\n        const e = i(this);\n        e.stopped = !0, \"function\" == typeof e.event.stopPropagation && e.event.stopPropagation();\n      },\n\n      stopImmediatePropagation() {\n        const e = i(this);\n        e.stopped = !0, e.immediateStopped = !0, \"function\" == typeof e.event.stopImmediatePropagation && e.event.stopImmediatePropagation();\n      },\n\n      get bubbles() {\n        return Boolean(i(this).event.bubbles);\n      },\n\n      get cancelable() {\n        return Boolean(i(this).event.cancelable);\n      },\n\n      preventDefault() {\n        s(i(this));\n      },\n\n      get defaultPrevented() {\n        return i(this).canceled;\n      },\n\n      get composed() {\n        return Boolean(i(this).event.composed);\n      },\n\n      get timeStamp() {\n        return i(this).timeStamp;\n      },\n\n      get srcElement() {\n        return i(this).eventTarget;\n      },\n\n      get cancelBubble() {\n        return i(this).stopped;\n      },\n\n      set cancelBubble(e) {\n        if (!e) return;\n        const t = i(this);\n        t.stopped = !0, \"boolean\" == typeof t.event.cancelBubble && (t.event.cancelBubble = !0);\n      },\n\n      get returnValue() {\n        return !i(this).canceled;\n      },\n\n      set returnValue(e) {\n        e || s(i(this));\n      },\n\n      initEvent() {}\n\n    }, Object.defineProperty(u.prototype, \"constructor\", {\n      value: u,\n      configurable: !0,\n      writable: !0\n    }), \"undefined\" != typeof window && void 0 !== window.Event && (Object.setPrototypeOf(u.prototype, window.Event.prototype), o.set(window.Event.prototype, u));\n    const h = new WeakMap();\n\n    function d(e) {\n      return null !== e && \"object\" == typeof e;\n    }\n\n    function y(e) {\n      const t = h.get(e);\n      if (null == t) throw new TypeError(\"'this' is expected an EventTarget object, but got another value.\");\n      return t;\n    }\n\n    function v(e, t) {\n      Object.defineProperty(e, \"on\" + t, function (e) {\n        return {\n          get() {\n            let t = y(this).get(e);\n\n            for (; null != t;) {\n              if (3 === t.listenerType) return t.listener;\n              t = t.next;\n            }\n\n            return null;\n          },\n\n          set(t) {\n            \"function\" == typeof t || d(t) || (t = null);\n            const n = y(this);\n            let r = null,\n                o = n.get(e);\n\n            for (; null != o;) 3 === o.listenerType ? null !== r ? r.next = o.next : null !== o.next ? n.set(e, o.next) : n.delete(e) : r = o, o = o.next;\n\n            if (null !== t) {\n              const o = {\n                listener: t,\n                listenerType: 3,\n                passive: !1,\n                once: !1,\n                next: null\n              };\n              null === r ? n.set(e, o) : r.next = o;\n            }\n          },\n\n          configurable: !0,\n          enumerable: !0\n        };\n      }(t));\n    }\n\n    function m(e) {\n      function t() {\n        b.call(this);\n      }\n\n      t.prototype = Object.create(b.prototype, {\n        constructor: {\n          value: t,\n          configurable: !0,\n          writable: !0\n        }\n      });\n\n      for (let n = 0; n < e.length; ++n) v(t.prototype, e[n]);\n\n      return t;\n    }\n\n    function b() {\n      if (!(this instanceof b)) {\n        if (1 === arguments.length && Array.isArray(arguments[0])) return m(arguments[0]);\n\n        if (arguments.length > 0) {\n          const e = new Array(arguments.length);\n\n          for (let t = 0; t < arguments.length; ++t) e[t] = arguments[t];\n\n          return m(e);\n        }\n\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n\n      h.set(this, new Map());\n    }\n\n    b.prototype = {\n      addEventListener(e, t, n) {\n        if (null == t) return;\n        if (\"function\" != typeof t && !d(t)) throw new TypeError(\"'listener' should be a function or an object.\");\n        const r = y(this),\n              o = d(n),\n              i = (o ? Boolean(n.capture) : Boolean(n)) ? 1 : 2,\n              s = {\n          listener: t,\n          listenerType: i,\n          passive: o && Boolean(n.passive),\n          once: o && Boolean(n.once),\n          next: null\n        };\n        let u = r.get(e);\n        if (void 0 === u) return void r.set(e, s);\n        let a = null;\n\n        for (; null != u;) {\n          if (u.listener === t && u.listenerType === i) return;\n          a = u, u = u.next;\n        }\n\n        a.next = s;\n      },\n\n      removeEventListener(e, t, n) {\n        if (null == t) return;\n        const r = y(this),\n              o = (d(n) ? Boolean(n.capture) : Boolean(n)) ? 1 : 2;\n        let i = null,\n            s = r.get(e);\n\n        for (; null != s;) {\n          if (s.listener === t && s.listenerType === o) return void (null !== i ? i.next = s.next : null !== s.next ? r.set(e, s.next) : r.delete(e));\n          i = s, s = s.next;\n        }\n      },\n\n      dispatchEvent(e) {\n        if (null == e || \"string\" != typeof e.type) throw new TypeError('\"event.type\" should be a string.');\n        const t = y(this),\n              n = e.type;\n        let r = t.get(n);\n        if (null == r) return !0;\n\n        const o = function (e, t) {\n          return new (c(Object.getPrototypeOf(t)))(e, t);\n        }(this, e);\n\n        let s = null;\n\n        for (; null != r;) {\n          if (r.once ? null !== s ? s.next = r.next : null !== r.next ? t.set(n, r.next) : t.delete(n) : s = r, f(o, r.passive ? r.listener : null), \"function\" == typeof r.listener) try {\n            r.listener.call(this, o);\n          } catch (e) {\n            \"undefined\" != typeof console && \"function\" == typeof console.error && console.error(e);\n          } else 3 !== r.listenerType && \"function\" == typeof r.listener.handleEvent && r.listener.handleEvent(o);\n          if (l(o)) break;\n          r = r.next;\n        }\n\n        return f(o, null), function (e, t) {\n          i(e).eventPhase = t;\n        }(o, 0), function (e, t) {\n          i(e).currentTarget = t;\n        }(o, null), !o.defaultPrevented;\n      }\n\n    }, Object.defineProperty(b.prototype, \"constructor\", {\n      value: b,\n      configurable: !0,\n      writable: !0\n    }), \"undefined\" != typeof window && void 0 !== window.EventTarget && Object.setPrototypeOf(b.prototype, window.EventTarget.prototype), t.defineEventAttribute = v, t.EventTarget = b, t.default = b, e.exports = b, e.exports.EventTarget = e.exports.default = b, e.exports.defineEventAttribute = v;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(3),\n        o = n(5),\n        i = n(6),\n        s = n(7);\n\n    function u(e, t, n) {\n      var r = e;\n      return o(t) ? (n = t, \"string\" == typeof e && (r = {\n        uri: e\n      })) : r = s(t, {\n        uri: e\n      }), r.callback = n, r;\n    }\n\n    function a(e, t, n) {\n      return p(t = u(e, t, n));\n    }\n\n    function p(e) {\n      if (void 0 === e.callback) throw new Error(\"callback argument missing\");\n\n      var t = !1,\n          n = function (n, r, o) {\n        t || (t = !0, e.callback(n, r, o));\n      };\n\n      function r() {\n        var e = void 0;\n        if (e = c.response ? c.response : c.responseText || function (e) {\n          try {\n            if (\"document\" === e.responseType) return e.responseXML;\n            var t = e.responseXML && \"parsererror\" === e.responseXML.documentElement.nodeName;\n            if (\"\" === e.responseType && !t) return e.responseXML;\n          } catch (e) {}\n\n          return null;\n        }(c), m) try {\n          e = JSON.parse(e);\n        } catch (e) {}\n        return e;\n      }\n\n      function o(e) {\n        return clearTimeout(l), e instanceof Error || (e = new Error(\"\" + (e || \"Unknown XMLHttpRequest Error\"))), e.statusCode = 0, n(e, b);\n      }\n\n      function s() {\n        if (!p) {\n          var t;\n          clearTimeout(l), t = e.useXDR && void 0 === c.status ? 200 : 1223 === c.status ? 204 : c.status;\n          var o = b,\n              s = null;\n          return 0 !== t ? (o = {\n            body: r(),\n            statusCode: t,\n            method: h,\n            headers: {},\n            url: f,\n            rawRequest: c\n          }, c.getAllResponseHeaders && (o.headers = i(c.getAllResponseHeaders()))) : s = new Error(\"Internal XMLHttpRequest Error\"), n(s, o, o.body);\n        }\n      }\n\n      var u,\n          p,\n          c = e.xhr || null;\n      c || (c = e.cors || e.useXDR ? new a.XDomainRequest() : new a.XMLHttpRequest());\n      var l,\n          f = c.url = e.uri || e.url,\n          h = c.method = e.method || \"GET\",\n          d = e.body || e.data,\n          y = c.headers = e.headers || {},\n          v = !!e.sync,\n          m = !1,\n          b = {\n        body: void 0,\n        headers: {},\n        statusCode: 0,\n        method: h,\n        url: f,\n        rawRequest: c\n      };\n      if (\"json\" in e && !1 !== e.json && (m = !0, y.accept || y.Accept || (y.Accept = \"application/json\"), \"GET\" !== h && \"HEAD\" !== h && (y[\"content-type\"] || y[\"Content-Type\"] || (y[\"Content-Type\"] = \"application/json\"), d = JSON.stringify(!0 === e.json ? d : e.json))), c.onreadystatechange = function () {\n        4 === c.readyState && setTimeout(s, 0);\n      }, c.onload = s, c.onerror = o, c.onprogress = function () {}, c.onabort = function () {\n        p = !0;\n      }, c.ontimeout = o, c.open(h, f, !v, e.username, e.password), v || (c.withCredentials = !!e.withCredentials), !v && e.timeout > 0 && (l = setTimeout(function () {\n        if (!p) {\n          p = !0, c.abort(\"timeout\");\n          var e = new Error(\"XMLHttpRequest timeout\");\n          e.code = \"ETIMEDOUT\", o(e);\n        }\n      }, e.timeout)), c.setRequestHeader) for (u in y) y.hasOwnProperty(u) && c.setRequestHeader(u, y[u]);else if (e.headers && !function (e) {\n        for (var t in e) if (e.hasOwnProperty(t)) return !1;\n\n        return !0;\n      }(e.headers)) throw new Error(\"Headers cannot be set on an XDomainRequest object\");\n      return \"responseType\" in e && (c.responseType = e.responseType), \"beforeSend\" in e && \"function\" == typeof e.beforeSend && e.beforeSend(c), c.send(d || null), c;\n    }\n\n    e.exports = a, e.exports.default = a, a.XMLHttpRequest = r.XMLHttpRequest || function () {}, a.XDomainRequest = \"withCredentials\" in new a.XMLHttpRequest() ? a.XMLHttpRequest : r.XDomainRequest, function (e, t) {\n      for (var n = 0; n < e.length; n++) t(e[n]);\n    }([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function (e) {\n      a[\"delete\" === e ? \"del\" : e] = function (t, n, r) {\n        return (n = u(t, n, r)).method = e.toUpperCase(), p(n);\n      };\n    });\n  }, function (e, t, n) {\n    (function (t) {\n      var n;\n      n = \"undefined\" != typeof window ? window : void 0 !== t ? t : \"undefined\" != typeof self ? self : {}, e.exports = n;\n    }).call(this, n(4));\n  }, function (e, t) {\n    var n;\n\n    n = function () {\n      return this;\n    }();\n\n    try {\n      n = n || new Function(\"return this\")();\n    } catch (e) {\n      \"object\" == typeof window && (n = window);\n    }\n\n    e.exports = n;\n  }, function (e, t) {\n    e.exports = function (e) {\n      if (!e) return !1;\n      var t = n.call(e);\n      return \"[object Function]\" === t || \"function\" == typeof e && \"[object RegExp]\" !== t || \"undefined\" != typeof window && (e === window.setTimeout || e === window.alert || e === window.confirm || e === window.prompt);\n    };\n\n    var n = Object.prototype.toString;\n  }, function (e, t) {\n    var n = function (e) {\n      return e.replace(/^\\s+|\\s+$/g, \"\");\n    };\n\n    e.exports = function (e) {\n      if (!e) return {};\n\n      for (var t, r = {}, o = n(e).split(\"\\n\"), i = 0; i < o.length; i++) {\n        var s = o[i],\n            u = s.indexOf(\":\"),\n            a = n(s.slice(0, u)).toLowerCase(),\n            p = n(s.slice(u + 1));\n        void 0 === r[a] ? r[a] = p : (t = r[a], \"[object Array]\" === Object.prototype.toString.call(t) ? r[a].push(p) : r[a] = [r[a], p]);\n      }\n\n      return r;\n    };\n  }, function (e, t) {\n    e.exports = function () {\n      for (var e = {}, t = 0; t < arguments.length; t++) {\n        var r = arguments[t];\n\n        for (var o in r) n.call(r, o) && (e[o] = r[o]);\n      }\n\n      return e;\n    };\n\n    var n = Object.prototype.hasOwnProperty;\n  }]);\n});","map":{"version":3,"sources":["webpack://UpChunk/webpack/universalModuleDefinition","webpack://UpChunk/webpack/bootstrap","webpack://UpChunk/src/upchunk.ts","webpack://UpChunk/node_modules/event-target-shim/dist/event-target-shim.js","webpack://UpChunk/node_modules/xhr/index.js","webpack://UpChunk/node_modules/global/window.js","webpack://UpChunk/(webpack)/buildin/global.js","webpack://UpChunk/node_modules/is-function/index.js","webpack://UpChunk/node_modules/parse-headers/parse-headers.js","webpack://UpChunk/node_modules/xtend/immutable.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__assign","assign","arguments","length","apply","createUpload","UpChunk","event_target_shim_1","xhr_1","SUCCESSFUL_CHUNK_UPLOAD_CODES","TEMPORARY_ERROR_CODES","options","_this","endpoint","file","headers","method","chunkSize","attempts","delayBeforeAttempt","maxFileBytes","maxFileSize","chunkCount","chunkByteSize","totalChunks","Math","ceil","size","attemptCount","offline","paused","success","reader","FileReader","eventTarget","EventTarget","validateOptions","getEndpoint","then","sendChunks","window","addEventListener","dispatch","on","eventName","fn","abort","_a","pause","currentXhr","resume","detail","event","CustomEvent","dispatchEvent","TypeError","File","Error","endpointValue","Promise","resolve","getChunk","start","onload","result","chunk","Blob","type","readAsArrayBuffer","slice","xhrPromise","beforeSend","xhrObject","upload","onprogress","percentagePerChunk","sizePerChunk","successfulPercentage","loaded","total","chunkPercentage","min","reject","err","resp","undefined","sendChunk","rangeStart","rangeEnd","chunkNumber","url","body","manageRetries","setTimeout","message","attemptsLeft","res","includes","statusCode","response","percentProgress","privateData","WeakMap","wrappers","pd","retv","console","assert","setCancelFlag","data","passiveListener","error","cancelable","canceled","preventDefault","Event","set","eventPhase","currentTarget","stopped","immediateStopped","timeStamp","Date","now","keys","defineRedirectDescriptor","stopPropagation","stopImmediatePropagation","Boolean","bubbles","composed","cancelBubble","configurable","writable","setPrototypeOf","defineCallDescriptor","BaseEvent","proto","constructor","getOwnPropertyDescriptor","isFunc","getWrapper","wrapper","defineWrapper","getPrototypeOf","isStopped","setPassiveListener","listenersMap","isObject","x","getListeners","listeners","node","listenerType","listener","next","prev","delete","newNode","passive","once","defineEventAttribute","eventTargetPrototype","defineEventAttributeDescriptor","defineCustomEventTarget","eventNames","CustomEventTarget","Map","Array","isArray","types","optionsIsObj","capture","wrappedEvent","wrapEvent","handleEvent","setEventPhase","setCurrentTarget","defaultPrevented","default","isFunction","parseHeaders","xtend","createXHR","XMLHttpRequest","XDomainRequest","forEachArray","uri","callback","initParams","toUpperCase","_createXHR","array","iterator","obj","params","called","xhr","readyState","loadFunc","getBody","responseText","getXml","isJson","JSON","parse","e","errorFunc","evt","clearTimeout","timeoutTimer","failureResponse","aborted","status","useXDR","rawRequest","getAllResponseHeaders","cors","sync","json","stringify","onreadystatechange","onerror","onabort","ontimeout","open","username","password","withCredentials","timeout","code","setRequestHeader","isEmpty","responseType","send","responseXML","firefoxBugTakenEffect","documentElement","nodeName","win","global","self","g","Function","toString","string","alert","confirm","prompt","trim","replace","arg","headersArr","split","row","index","indexOf","toLowerCase","push","target","source"],"mappings":"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","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UpChunk\"] = factory();\n\telse\n\t\troot[\"UpChunk\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.createUpload = exports.UpChunk = void 0;\nvar event_target_shim_1 = require(\"event-target-shim\");\nvar xhr_1 = require(\"xhr\");\nvar SUCCESSFUL_CHUNK_UPLOAD_CODES = [200, 201, 202, 204, 308];\nvar TEMPORARY_ERROR_CODES = [408, 502, 503, 504]; // These error codes imply a chunk may be retried\nvar UpChunk = /** @class */ (function () {\n    function UpChunk(options) {\n        var _this = this;\n        this.endpoint = options.endpoint;\n        this.file = options.file;\n        this.headers = options.headers || {};\n        this.method = options.method || 'PUT';\n        this.chunkSize = options.chunkSize || 5120;\n        this.attempts = options.attempts || 5;\n        this.delayBeforeAttempt = options.delayBeforeAttempt || 1;\n        this.maxFileBytes = (options.maxFileSize || 0) * 1024;\n        this.chunkCount = 0;\n        this.chunkByteSize = this.chunkSize * 1024;\n        this.totalChunks = Math.ceil(this.file.size / this.chunkByteSize);\n        this.attemptCount = 0;\n        this.offline = false;\n        this.paused = false;\n        this.success = false;\n        this.reader = new FileReader();\n        this.eventTarget = new event_target_shim_1.EventTarget();\n        this.validateOptions();\n        this.getEndpoint().then(function () { return _this.sendChunks(); });\n        // restart sync when back online\n        // trigger events when offline/back online\n        if (typeof (window) !== 'undefined') {\n            window.addEventListener('online', function () {\n                if (!_this.offline) {\n                    return;\n                }\n                _this.offline = false;\n                _this.dispatch('online');\n                _this.sendChunks();\n            });\n            window.addEventListener('offline', function () {\n                _this.offline = true;\n                _this.dispatch('offline');\n            });\n        }\n    }\n    /**\n     * Subscribe to an event\n     */\n    UpChunk.prototype.on = function (eventName, fn) {\n        this.eventTarget.addEventListener(eventName, fn);\n    };\n    UpChunk.prototype.abort = function () {\n        var _a;\n        this.pause();\n        (_a = this.currentXhr) === null || _a === void 0 ? void 0 : _a.abort();\n    };\n    UpChunk.prototype.pause = function () {\n        this.paused = true;\n    };\n    UpChunk.prototype.resume = function () {\n        if (this.paused) {\n            this.paused = false;\n            this.sendChunks();\n        }\n    };\n    /**\n     * Dispatch an event\n     */\n    UpChunk.prototype.dispatch = function (eventName, detail) {\n        var event = new CustomEvent(eventName, { detail: detail });\n        this.eventTarget.dispatchEvent(event);\n    };\n    /**\n     * Validate options and throw errors if expectations are violated.\n     */\n    UpChunk.prototype.validateOptions = function () {\n        if (!this.endpoint ||\n            (typeof this.endpoint !== 'function' && typeof this.endpoint !== 'string')) {\n            throw new TypeError('endpoint must be defined as a string or a function that returns a promise');\n        }\n        if (!(this.file instanceof File)) {\n            throw new TypeError('file must be a File object');\n        }\n        if (this.headers && typeof this.headers !== 'object') {\n            throw new TypeError('headers must be null or an object');\n        }\n        if (this.chunkSize &&\n            (typeof this.chunkSize !== 'number' ||\n                this.chunkSize <= 0 ||\n                this.chunkSize % 256 !== 0)) {\n            throw new TypeError('chunkSize must be a positive number in multiples of 256');\n        }\n        if (this.maxFileBytes > 0 && this.maxFileBytes < this.file.size) {\n            throw new Error(\"file size exceeds maximum (\" + this.file.size + \" > \" + this.maxFileBytes + \")\");\n        }\n        if (this.attempts &&\n            (typeof this.attempts !== 'number' || this.attempts <= 0)) {\n            throw new TypeError('retries must be a positive number');\n        }\n        if (this.delayBeforeAttempt &&\n            (typeof this.delayBeforeAttempt !== 'number' ||\n                this.delayBeforeAttempt < 0)) {\n            throw new TypeError('delayBeforeAttempt must be a positive number');\n        }\n    };\n    /**\n     * Endpoint can either be a URL or a function that returns a promise that resolves to a string.\n     */\n    UpChunk.prototype.getEndpoint = function () {\n        var _this = this;\n        if (typeof this.endpoint === 'string') {\n            this.endpointValue = this.endpoint;\n            return Promise.resolve(this.endpoint);\n        }\n        return this.endpoint(this.file).then(function (value) {\n            _this.endpointValue = value;\n            return _this.endpointValue;\n        });\n    };\n    /**\n     * Get portion of the file of x bytes corresponding to chunkSize\n     */\n    UpChunk.prototype.getChunk = function () {\n        var _this = this;\n        return new Promise(function (resolve) {\n            // Since we start with 0-chunkSize for the range, we need to subtract 1.\n            var length = _this.totalChunks === 1 ? _this.file.size : _this.chunkByteSize;\n            var start = length * _this.chunkCount;\n            _this.reader.onload = function () {\n                if (_this.reader.result !== null) {\n                    _this.chunk = new Blob([_this.reader.result], {\n                        type: 'application/octet-stream',\n                    });\n                }\n                resolve();\n            };\n            _this.reader.readAsArrayBuffer(_this.file.slice(start, start + length));\n        });\n    };\n    UpChunk.prototype.xhrPromise = function (options) {\n        var _this = this;\n        var beforeSend = function (xhrObject) {\n            xhrObject.upload.onprogress = function (event) {\n                var _a;\n                var percentagePerChunk = 100 / _this.totalChunks;\n                var sizePerChunk = percentagePerChunk * _this.file.size;\n                var successfulPercentage = percentagePerChunk * _this.chunkCount;\n                var currentChunkProgress = event.loaded / ((_a = event.total) !== null && _a !== void 0 ? _a : sizePerChunk);\n                var chunkPercentage = currentChunkProgress * percentagePerChunk;\n                _this.dispatch('progress', Math.min(successfulPercentage + chunkPercentage, 100));\n            };\n        };\n        return new Promise(function (resolve, reject) {\n            _this.currentXhr = xhr_1[\"default\"](__assign(__assign({}, options), { beforeSend: beforeSend }), function (err, resp) {\n                _this.currentXhr = undefined;\n                if (err) {\n                    return reject(err);\n                }\n                return resolve(resp);\n            });\n        });\n    };\n    /**\n     * Send chunk of the file with appropriate headers and add post parameters if it's last chunk\n     */\n    UpChunk.prototype.sendChunk = function () {\n        var rangeStart = this.chunkCount * this.chunkByteSize;\n        var rangeEnd = rangeStart + this.chunk.size - 1;\n        var headers = __assign(__assign({}, this.headers), { 'Content-Type': this.file.type, 'Content-Range': \"bytes \" + rangeStart + \"-\" + rangeEnd + \"/\" + this.file.size });\n        this.dispatch('attempt', {\n            chunkNumber: this.chunkCount,\n            chunkSize: this.chunk.size,\n        });\n        return this.xhrPromise({\n            headers: headers,\n            url: this.endpointValue,\n            method: this.method,\n            body: this.chunk,\n        });\n    };\n    /**\n     * Called on net failure. If retry counter !== 0, retry after delayBeforeAttempt\n     */\n    UpChunk.prototype.manageRetries = function () {\n        var _this = this;\n        if (this.attemptCount < this.attempts) {\n            setTimeout(function () { return _this.sendChunks(); }, this.delayBeforeAttempt * 1000);\n            this.dispatch('attemptFailure', {\n                message: \"An error occured uploading chunk \" + this.chunkCount + \". \" + (this.attempts - this.attemptCount) + \" retries left.\",\n                chunkNumber: this.chunkCount,\n                attemptsLeft: this.attempts - this.attemptCount,\n            });\n            return;\n        }\n        this.dispatch('error', {\n            message: \"An error occured uploading chunk \" + this.chunkCount + \". No more retries, stopping upload\",\n            chunk: this.chunkCount,\n            attempts: this.attemptCount,\n        });\n    };\n    /**\n     * Manage the whole upload by calling getChunk & sendChunk\n     * handle errors & retries and dispatch events\n     */\n    UpChunk.prototype.sendChunks = function () {\n        var _this = this;\n        if (this.paused || this.offline || this.success) {\n            return;\n        }\n        this.getChunk()\n            .then(function () { return _this.sendChunk(); })\n            .then(function (res) {\n            _this.attemptCount = _this.attemptCount + 1;\n            if (SUCCESSFUL_CHUNK_UPLOAD_CODES.includes(res.statusCode)) {\n                _this.dispatch('chunkSuccess', {\n                    chunk: _this.chunkCount,\n                    attempts: _this.attemptCount,\n                    response: res,\n                });\n                _this.attemptCount = 0;\n                _this.chunkCount = _this.chunkCount + 1;\n                if (_this.chunkCount < _this.totalChunks) {\n                    _this.sendChunks();\n                }\n                else {\n                    _this.success = true;\n                    _this.dispatch('success');\n                }\n                var chunkFraction = _this.chunkCount / _this.totalChunks;\n                var uploadedBytes = chunkFraction * _this.file.size;\n                var percentProgress = (100 * uploadedBytes) / _this.file.size;\n                _this.dispatch('progress', percentProgress);\n            }\n            else if (TEMPORARY_ERROR_CODES.includes(res.statusCode)) {\n                if (_this.paused || _this.offline) {\n                    return;\n                }\n                _this.manageRetries();\n            }\n            else {\n                if (_this.paused || _this.offline) {\n                    return;\n                }\n                _this.dispatch('error', {\n                    message: \"Server responded with \" + res.statusCode + \". Stopping upload.\",\n                    chunkNumber: _this.chunkCount,\n                    attempts: _this.attemptCount,\n                });\n            }\n        })[\"catch\"](function (err) {\n            if (_this.paused || _this.offline) {\n                return;\n            }\n            // this type of error can happen after network disconnection on CORS setup\n            _this.manageRetries();\n        });\n    };\n    return UpChunk;\n}());\nexports.UpChunk = UpChunk;\nexports.createUpload = function (options) { return new UpChunk(options); };\n","/**\n * @author Toru Nagashima <https://github.com/mysticatea>\n * @copyright 2015 Toru Nagashima. All rights reserved.\n * See LICENSE file in root directory for full license.\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/**\n * @typedef {object} PrivateData\n * @property {EventTarget} eventTarget The event target.\n * @property {{type:string}} event The original event object.\n * @property {number} eventPhase The current event phase.\n * @property {EventTarget|null} currentTarget The current event target.\n * @property {boolean} canceled The flag to prevent default.\n * @property {boolean} stopped The flag to stop propagation.\n * @property {boolean} immediateStopped The flag to stop propagation immediately.\n * @property {Function|null} passiveListener The listener if the current listener is passive. Otherwise this is null.\n * @property {number} timeStamp The unix time.\n * @private\n */\n\n/**\n * Private data for event wrappers.\n * @type {WeakMap<Event, PrivateData>}\n * @private\n */\nconst privateData = new WeakMap();\n\n/**\n * Cache for wrapper classes.\n * @type {WeakMap<Object, Function>}\n * @private\n */\nconst wrappers = new WeakMap();\n\n/**\n * Get private data.\n * @param {Event} event The event object to get private data.\n * @returns {PrivateData} The private data of the event.\n * @private\n */\nfunction pd(event) {\n    const retv = privateData.get(event);\n    console.assert(\n        retv != null,\n        \"'this' is expected an Event object, but got\",\n        event\n    );\n    return retv\n}\n\n/**\n * https://dom.spec.whatwg.org/#set-the-canceled-flag\n * @param data {PrivateData} private data.\n */\nfunction setCancelFlag(data) {\n    if (data.passiveListener != null) {\n        if (\n            typeof console !== \"undefined\" &&\n            typeof console.error === \"function\"\n        ) {\n            console.error(\n                \"Unable to preventDefault inside passive event listener invocation.\",\n                data.passiveListener\n            );\n        }\n        return\n    }\n    if (!data.event.cancelable) {\n        return\n    }\n\n    data.canceled = true;\n    if (typeof data.event.preventDefault === \"function\") {\n        data.event.preventDefault();\n    }\n}\n\n/**\n * @see https://dom.spec.whatwg.org/#interface-event\n * @private\n */\n/**\n * The event wrapper.\n * @constructor\n * @param {EventTarget} eventTarget The event target of this dispatching.\n * @param {Event|{type:string}} event The original event to wrap.\n */\nfunction Event(eventTarget, event) {\n    privateData.set(this, {\n        eventTarget,\n        event,\n        eventPhase: 2,\n        currentTarget: eventTarget,\n        canceled: false,\n        stopped: false,\n        immediateStopped: false,\n        passiveListener: null,\n        timeStamp: event.timeStamp || Date.now(),\n    });\n\n    // https://heycam.github.io/webidl/#Unforgeable\n    Object.defineProperty(this, \"isTrusted\", { value: false, enumerable: true });\n\n    // Define accessors\n    const keys = Object.keys(event);\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i];\n        if (!(key in this)) {\n            Object.defineProperty(this, key, defineRedirectDescriptor(key));\n        }\n    }\n}\n\n// Should be enumerable, but class methods are not enumerable.\nEvent.prototype = {\n    /**\n     * The type of this event.\n     * @type {string}\n     */\n    get type() {\n        return pd(this).event.type\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     */\n    get target() {\n        return pd(this).eventTarget\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     */\n    get currentTarget() {\n        return pd(this).currentTarget\n    },\n\n    /**\n     * @returns {EventTarget[]} The composed path of this event.\n     */\n    composedPath() {\n        const currentTarget = pd(this).currentTarget;\n        if (currentTarget == null) {\n            return []\n        }\n        return [currentTarget]\n    },\n\n    /**\n     * Constant of NONE.\n     * @type {number}\n     */\n    get NONE() {\n        return 0\n    },\n\n    /**\n     * Constant of CAPTURING_PHASE.\n     * @type {number}\n     */\n    get CAPTURING_PHASE() {\n        return 1\n    },\n\n    /**\n     * Constant of AT_TARGET.\n     * @type {number}\n     */\n    get AT_TARGET() {\n        return 2\n    },\n\n    /**\n     * Constant of BUBBLING_PHASE.\n     * @type {number}\n     */\n    get BUBBLING_PHASE() {\n        return 3\n    },\n\n    /**\n     * The target of this event.\n     * @type {number}\n     */\n    get eventPhase() {\n        return pd(this).eventPhase\n    },\n\n    /**\n     * Stop event bubbling.\n     * @returns {void}\n     */\n    stopPropagation() {\n        const data = pd(this);\n\n        data.stopped = true;\n        if (typeof data.event.stopPropagation === \"function\") {\n            data.event.stopPropagation();\n        }\n    },\n\n    /**\n     * Stop event bubbling.\n     * @returns {void}\n     */\n    stopImmediatePropagation() {\n        const data = pd(this);\n\n        data.stopped = true;\n        data.immediateStopped = true;\n        if (typeof data.event.stopImmediatePropagation === \"function\") {\n            data.event.stopImmediatePropagation();\n        }\n    },\n\n    /**\n     * The flag to be bubbling.\n     * @type {boolean}\n     */\n    get bubbles() {\n        return Boolean(pd(this).event.bubbles)\n    },\n\n    /**\n     * The flag to be cancelable.\n     * @type {boolean}\n     */\n    get cancelable() {\n        return Boolean(pd(this).event.cancelable)\n    },\n\n    /**\n     * Cancel this event.\n     * @returns {void}\n     */\n    preventDefault() {\n        setCancelFlag(pd(this));\n    },\n\n    /**\n     * The flag to indicate cancellation state.\n     * @type {boolean}\n     */\n    get defaultPrevented() {\n        return pd(this).canceled\n    },\n\n    /**\n     * The flag to be composed.\n     * @type {boolean}\n     */\n    get composed() {\n        return Boolean(pd(this).event.composed)\n    },\n\n    /**\n     * The unix time of this event.\n     * @type {number}\n     */\n    get timeStamp() {\n        return pd(this).timeStamp\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     * @deprecated\n     */\n    get srcElement() {\n        return pd(this).eventTarget\n    },\n\n    /**\n     * The flag to stop event bubbling.\n     * @type {boolean}\n     * @deprecated\n     */\n    get cancelBubble() {\n        return pd(this).stopped\n    },\n    set cancelBubble(value) {\n        if (!value) {\n            return\n        }\n        const data = pd(this);\n\n        data.stopped = true;\n        if (typeof data.event.cancelBubble === \"boolean\") {\n            data.event.cancelBubble = true;\n        }\n    },\n\n    /**\n     * The flag to indicate cancellation state.\n     * @type {boolean}\n     * @deprecated\n     */\n    get returnValue() {\n        return !pd(this).canceled\n    },\n    set returnValue(value) {\n        if (!value) {\n            setCancelFlag(pd(this));\n        }\n    },\n\n    /**\n     * Initialize this event object. But do nothing under event dispatching.\n     * @param {string} type The event type.\n     * @param {boolean} [bubbles=false] The flag to be possible to bubble up.\n     * @param {boolean} [cancelable=false] The flag to be possible to cancel.\n     * @deprecated\n     */\n    initEvent() {\n        // Do nothing.\n    },\n};\n\n// `constructor` is not enumerable.\nObject.defineProperty(Event.prototype, \"constructor\", {\n    value: Event,\n    configurable: true,\n    writable: true,\n});\n\n// Ensure `event instanceof window.Event` is `true`.\nif (typeof window !== \"undefined\" && typeof window.Event !== \"undefined\") {\n    Object.setPrototypeOf(Event.prototype, window.Event.prototype);\n\n    // Make association for wrappers.\n    wrappers.set(window.Event.prototype, Event);\n}\n\n/**\n * Get the property descriptor to redirect a given property.\n * @param {string} key Property name to define property descriptor.\n * @returns {PropertyDescriptor} The property descriptor to redirect the property.\n * @private\n */\nfunction defineRedirectDescriptor(key) {\n    return {\n        get() {\n            return pd(this).event[key]\n        },\n        set(value) {\n            pd(this).event[key] = value;\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Get the property descriptor to call a given method property.\n * @param {string} key Property name to define property descriptor.\n * @returns {PropertyDescriptor} The property descriptor to call the method property.\n * @private\n */\nfunction defineCallDescriptor(key) {\n    return {\n        value() {\n            const event = pd(this).event;\n            return event[key].apply(event, arguments)\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Define new wrapper class.\n * @param {Function} BaseEvent The base wrapper class.\n * @param {Object} proto The prototype of the original event.\n * @returns {Function} The defined wrapper class.\n * @private\n */\nfunction defineWrapper(BaseEvent, proto) {\n    const keys = Object.keys(proto);\n    if (keys.length === 0) {\n        return BaseEvent\n    }\n\n    /** CustomEvent */\n    function CustomEvent(eventTarget, event) {\n        BaseEvent.call(this, eventTarget, event);\n    }\n\n    CustomEvent.prototype = Object.create(BaseEvent.prototype, {\n        constructor: { value: CustomEvent, configurable: true, writable: true },\n    });\n\n    // Define accessors.\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i];\n        if (!(key in BaseEvent.prototype)) {\n            const descriptor = Object.getOwnPropertyDescriptor(proto, key);\n            const isFunc = typeof descriptor.value === \"function\";\n            Object.defineProperty(\n                CustomEvent.prototype,\n                key,\n                isFunc\n                    ? defineCallDescriptor(key)\n                    : defineRedirectDescriptor(key)\n            );\n        }\n    }\n\n    return CustomEvent\n}\n\n/**\n * Get the wrapper class of a given prototype.\n * @param {Object} proto The prototype of the original event to get its wrapper.\n * @returns {Function} The wrapper class.\n * @private\n */\nfunction getWrapper(proto) {\n    if (proto == null || proto === Object.prototype) {\n        return Event\n    }\n\n    let wrapper = wrappers.get(proto);\n    if (wrapper == null) {\n        wrapper = defineWrapper(getWrapper(Object.getPrototypeOf(proto)), proto);\n        wrappers.set(proto, wrapper);\n    }\n    return wrapper\n}\n\n/**\n * Wrap a given event to management a dispatching.\n * @param {EventTarget} eventTarget The event target of this dispatching.\n * @param {Object} event The event to wrap.\n * @returns {Event} The wrapper instance.\n * @private\n */\nfunction wrapEvent(eventTarget, event) {\n    const Wrapper = getWrapper(Object.getPrototypeOf(event));\n    return new Wrapper(eventTarget, event)\n}\n\n/**\n * Get the immediateStopped flag of a given event.\n * @param {Event} event The event to get.\n * @returns {boolean} The flag to stop propagation immediately.\n * @private\n */\nfunction isStopped(event) {\n    return pd(event).immediateStopped\n}\n\n/**\n * Set the current event phase of a given event.\n * @param {Event} event The event to set current target.\n * @param {number} eventPhase New event phase.\n * @returns {void}\n * @private\n */\nfunction setEventPhase(event, eventPhase) {\n    pd(event).eventPhase = eventPhase;\n}\n\n/**\n * Set the current target of a given event.\n * @param {Event} event The event to set current target.\n * @param {EventTarget|null} currentTarget New current target.\n * @returns {void}\n * @private\n */\nfunction setCurrentTarget(event, currentTarget) {\n    pd(event).currentTarget = currentTarget;\n}\n\n/**\n * Set a passive listener of a given event.\n * @param {Event} event The event to set current target.\n * @param {Function|null} passiveListener New passive listener.\n * @returns {void}\n * @private\n */\nfunction setPassiveListener(event, passiveListener) {\n    pd(event).passiveListener = passiveListener;\n}\n\n/**\n * @typedef {object} ListenerNode\n * @property {Function} listener\n * @property {1|2|3} listenerType\n * @property {boolean} passive\n * @property {boolean} once\n * @property {ListenerNode|null} next\n * @private\n */\n\n/**\n * @type {WeakMap<object, Map<string, ListenerNode>>}\n * @private\n */\nconst listenersMap = new WeakMap();\n\n// Listener types\nconst CAPTURE = 1;\nconst BUBBLE = 2;\nconst ATTRIBUTE = 3;\n\n/**\n * Check whether a given value is an object or not.\n * @param {any} x The value to check.\n * @returns {boolean} `true` if the value is an object.\n */\nfunction isObject(x) {\n    return x !== null && typeof x === \"object\" //eslint-disable-line no-restricted-syntax\n}\n\n/**\n * Get listeners.\n * @param {EventTarget} eventTarget The event target to get.\n * @returns {Map<string, ListenerNode>} The listeners.\n * @private\n */\nfunction getListeners(eventTarget) {\n    const listeners = listenersMap.get(eventTarget);\n    if (listeners == null) {\n        throw new TypeError(\n            \"'this' is expected an EventTarget object, but got another value.\"\n        )\n    }\n    return listeners\n}\n\n/**\n * Get the property descriptor for the event attribute of a given event.\n * @param {string} eventName The event name to get property descriptor.\n * @returns {PropertyDescriptor} The property descriptor.\n * @private\n */\nfunction defineEventAttributeDescriptor(eventName) {\n    return {\n        get() {\n            const listeners = getListeners(this);\n            let node = listeners.get(eventName);\n            while (node != null) {\n                if (node.listenerType === ATTRIBUTE) {\n                    return node.listener\n                }\n                node = node.next;\n            }\n            return null\n        },\n\n        set(listener) {\n            if (typeof listener !== \"function\" && !isObject(listener)) {\n                listener = null; // eslint-disable-line no-param-reassign\n            }\n            const listeners = getListeners(this);\n\n            // Traverse to the tail while removing old value.\n            let prev = null;\n            let node = listeners.get(eventName);\n            while (node != null) {\n                if (node.listenerType === ATTRIBUTE) {\n                    // Remove old value.\n                    if (prev !== null) {\n                        prev.next = node.next;\n                    } else if (node.next !== null) {\n                        listeners.set(eventName, node.next);\n                    } else {\n                        listeners.delete(eventName);\n                    }\n                } else {\n                    prev = node;\n                }\n\n                node = node.next;\n            }\n\n            // Add new value.\n            if (listener !== null) {\n                const newNode = {\n                    listener,\n                    listenerType: ATTRIBUTE,\n                    passive: false,\n                    once: false,\n                    next: null,\n                };\n                if (prev === null) {\n                    listeners.set(eventName, newNode);\n                } else {\n                    prev.next = newNode;\n                }\n            }\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Define an event attribute (e.g. `eventTarget.onclick`).\n * @param {Object} eventTargetPrototype The event target prototype to define an event attrbite.\n * @param {string} eventName The event name to define.\n * @returns {void}\n */\nfunction defineEventAttribute(eventTargetPrototype, eventName) {\n    Object.defineProperty(\n        eventTargetPrototype,\n        `on${eventName}`,\n        defineEventAttributeDescriptor(eventName)\n    );\n}\n\n/**\n * Define a custom EventTarget with event attributes.\n * @param {string[]} eventNames Event names for event attributes.\n * @returns {EventTarget} The custom EventTarget.\n * @private\n */\nfunction defineCustomEventTarget(eventNames) {\n    /** CustomEventTarget */\n    function CustomEventTarget() {\n        EventTarget.call(this);\n    }\n\n    CustomEventTarget.prototype = Object.create(EventTarget.prototype, {\n        constructor: {\n            value: CustomEventTarget,\n            configurable: true,\n            writable: true,\n        },\n    });\n\n    for (let i = 0; i < eventNames.length; ++i) {\n        defineEventAttribute(CustomEventTarget.prototype, eventNames[i]);\n    }\n\n    return CustomEventTarget\n}\n\n/**\n * EventTarget.\n *\n * - This is constructor if no arguments.\n * - This is a function which returns a CustomEventTarget constructor if there are arguments.\n *\n * For example:\n *\n *     class A extends EventTarget {}\n *     class B extends EventTarget(\"message\") {}\n *     class C extends EventTarget(\"message\", \"error\") {}\n *     class D extends EventTarget([\"message\", \"error\"]) {}\n */\nfunction EventTarget() {\n    /*eslint-disable consistent-return */\n    if (this instanceof EventTarget) {\n        listenersMap.set(this, new Map());\n        return\n    }\n    if (arguments.length === 1 && Array.isArray(arguments[0])) {\n        return defineCustomEventTarget(arguments[0])\n    }\n    if (arguments.length > 0) {\n        const types = new Array(arguments.length);\n        for (let i = 0; i < arguments.length; ++i) {\n            types[i] = arguments[i];\n        }\n        return defineCustomEventTarget(types)\n    }\n    throw new TypeError(\"Cannot call a class as a function\")\n    /*eslint-enable consistent-return */\n}\n\n// Should be enumerable, but class methods are not enumerable.\nEventTarget.prototype = {\n    /**\n     * Add a given listener to this event target.\n     * @param {string} eventName The event name to add.\n     * @param {Function} listener The listener to add.\n     * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.\n     * @returns {void}\n     */\n    addEventListener(eventName, listener, options) {\n        if (listener == null) {\n            return\n        }\n        if (typeof listener !== \"function\" && !isObject(listener)) {\n            throw new TypeError(\"'listener' should be a function or an object.\")\n        }\n\n        const listeners = getListeners(this);\n        const optionsIsObj = isObject(options);\n        const capture = optionsIsObj\n            ? Boolean(options.capture)\n            : Boolean(options);\n        const listenerType = capture ? CAPTURE : BUBBLE;\n        const newNode = {\n            listener,\n            listenerType,\n            passive: optionsIsObj && Boolean(options.passive),\n            once: optionsIsObj && Boolean(options.once),\n            next: null,\n        };\n\n        // Set it as the first node if the first node is null.\n        let node = listeners.get(eventName);\n        if (node === undefined) {\n            listeners.set(eventName, newNode);\n            return\n        }\n\n        // Traverse to the tail while checking duplication..\n        let prev = null;\n        while (node != null) {\n            if (\n                node.listener === listener &&\n                node.listenerType === listenerType\n            ) {\n                // Should ignore duplication.\n                return\n            }\n            prev = node;\n            node = node.next;\n        }\n\n        // Add it.\n        prev.next = newNode;\n    },\n\n    /**\n     * Remove a given listener from this event target.\n     * @param {string} eventName The event name to remove.\n     * @param {Function} listener The listener to remove.\n     * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.\n     * @returns {void}\n     */\n    removeEventListener(eventName, listener, options) {\n        if (listener == null) {\n            return\n        }\n\n        const listeners = getListeners(this);\n        const capture = isObject(options)\n            ? Boolean(options.capture)\n            : Boolean(options);\n        const listenerType = capture ? CAPTURE : BUBBLE;\n\n        let prev = null;\n        let node = listeners.get(eventName);\n        while (node != null) {\n            if (\n                node.listener === listener &&\n                node.listenerType === listenerType\n            ) {\n                if (prev !== null) {\n                    prev.next = node.next;\n                } else if (node.next !== null) {\n                    listeners.set(eventName, node.next);\n                } else {\n                    listeners.delete(eventName);\n                }\n                return\n            }\n\n            prev = node;\n            node = node.next;\n        }\n    },\n\n    /**\n     * Dispatch a given event.\n     * @param {Event|{type:string}} event The event to dispatch.\n     * @returns {boolean} `false` if canceled.\n     */\n    dispatchEvent(event) {\n        if (event == null || typeof event.type !== \"string\") {\n            throw new TypeError('\"event.type\" should be a string.')\n        }\n\n        // If listeners aren't registered, terminate.\n        const listeners = getListeners(this);\n        const eventName = event.type;\n        let node = listeners.get(eventName);\n        if (node == null) {\n            return true\n        }\n\n        // Since we cannot rewrite several properties, so wrap object.\n        const wrappedEvent = wrapEvent(this, event);\n\n        // This doesn't process capturing phase and bubbling phase.\n        // This isn't participating in a tree.\n        let prev = null;\n        while (node != null) {\n            // Remove this listener if it's once\n            if (node.once) {\n                if (prev !== null) {\n                    prev.next = node.next;\n                } else if (node.next !== null) {\n                    listeners.set(eventName, node.next);\n                } else {\n                    listeners.delete(eventName);\n                }\n            } else {\n                prev = node;\n            }\n\n            // Call this listener\n            setPassiveListener(\n                wrappedEvent,\n                node.passive ? node.listener : null\n            );\n            if (typeof node.listener === \"function\") {\n                try {\n                    node.listener.call(this, wrappedEvent);\n                } catch (err) {\n                    if (\n                        typeof console !== \"undefined\" &&\n                        typeof console.error === \"function\"\n                    ) {\n                        console.error(err);\n                    }\n                }\n            } else if (\n                node.listenerType !== ATTRIBUTE &&\n                typeof node.listener.handleEvent === \"function\"\n            ) {\n                node.listener.handleEvent(wrappedEvent);\n            }\n\n            // Break if `event.stopImmediatePropagation` was called.\n            if (isStopped(wrappedEvent)) {\n                break\n            }\n\n            node = node.next;\n        }\n        setPassiveListener(wrappedEvent, null);\n        setEventPhase(wrappedEvent, 0);\n        setCurrentTarget(wrappedEvent, null);\n\n        return !wrappedEvent.defaultPrevented\n    },\n};\n\n// `constructor` is not enumerable.\nObject.defineProperty(EventTarget.prototype, \"constructor\", {\n    value: EventTarget,\n    configurable: true,\n    writable: true,\n});\n\n// Ensure `eventTarget instanceof window.EventTarget` is `true`.\nif (\n    typeof window !== \"undefined\" &&\n    typeof window.EventTarget !== \"undefined\"\n) {\n    Object.setPrototypeOf(EventTarget.prototype, window.EventTarget.prototype);\n}\n\nexports.defineEventAttribute = defineEventAttribute;\nexports.EventTarget = EventTarget;\nexports.default = EventTarget;\n\nmodule.exports = EventTarget\nmodule.exports.EventTarget = module.exports[\"default\"] = EventTarget\nmodule.exports.defineEventAttribute = defineEventAttribute\n//# sourceMappingURL=event-target-shim.js.map\n","\"use strict\";\nvar window = require(\"global/window\")\nvar isFunction = require(\"is-function\")\nvar parseHeaders = require(\"parse-headers\")\nvar xtend = require(\"xtend\")\n\nmodule.exports = createXHR\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = createXHR;\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop\ncreateXHR.XDomainRequest = \"withCredentials\" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\nforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function(method) {\n    createXHR[method === \"delete\" ? \"del\" : method] = function(uri, options, callback) {\n        options = initParams(uri, options, callback)\n        options.method = method.toUpperCase()\n        return _createXHR(options)\n    }\n})\n\nfunction forEachArray(array, iterator) {\n    for (var i = 0; i < array.length; i++) {\n        iterator(array[i])\n    }\n}\n\nfunction isEmpty(obj){\n    for(var i in obj){\n        if(obj.hasOwnProperty(i)) return false\n    }\n    return true\n}\n\nfunction initParams(uri, options, callback) {\n    var params = uri\n\n    if (isFunction(options)) {\n        callback = options\n        if (typeof uri === \"string\") {\n            params = {uri:uri}\n        }\n    } else {\n        params = xtend(options, {uri: uri})\n    }\n\n    params.callback = callback\n    return params\n}\n\nfunction createXHR(uri, options, callback) {\n    options = initParams(uri, options, callback)\n    return _createXHR(options)\n}\n\nfunction _createXHR(options) {\n    if(typeof options.callback === \"undefined\"){\n        throw new Error(\"callback argument missing\")\n    }\n\n    var called = false\n    var callback = function cbOnce(err, response, body){\n        if(!called){\n            called = true\n            options.callback(err, response, body)\n        }\n    }\n\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            setTimeout(loadFunc, 0)\n        }\n    }\n\n    function getBody() {\n        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n        var body = undefined\n\n        if (xhr.response) {\n            body = xhr.response\n        } else {\n            body = xhr.responseText || getXml(xhr)\n        }\n\n        if (isJson) {\n            try {\n                body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        return body\n    }\n\n    function errorFunc(evt) {\n        clearTimeout(timeoutTimer)\n        if(!(evt instanceof Error)){\n            evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\") )\n        }\n        evt.statusCode = 0\n        return callback(evt, failureResponse)\n    }\n\n    // will load the data & process the response in a special response object\n    function loadFunc() {\n        if (aborted) return\n        var status\n        clearTimeout(timeoutTimer)\n        if(options.useXDR && xhr.status===undefined) {\n            //IE8 CORS GET successful response doesn't have a status field, but body is fine\n            status = 200\n        } else {\n            status = (xhr.status === 1223 ? 204 : xhr.status)\n        }\n        var response = failureResponse\n        var err = null\n\n        if (status !== 0){\n            response = {\n                body: getBody(),\n                statusCode: status,\n                method: method,\n                headers: {},\n                url: uri,\n                rawRequest: xhr\n            }\n            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE\n                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n            }\n        } else {\n            err = new Error(\"Internal XMLHttpRequest Error\")\n        }\n        return callback(err, response, response.body)\n    }\n\n    var xhr = options.xhr || null\n\n    if (!xhr) {\n        if (options.cors || options.useXDR) {\n            xhr = new createXHR.XDomainRequest()\n        }else{\n            xhr = new createXHR.XMLHttpRequest()\n        }\n    }\n\n    var key\n    var aborted\n    var uri = xhr.url = options.uri || options.url\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data\n    var headers = xhr.headers = options.headers || {}\n    var sync = !!options.sync\n    var isJson = false\n    var timeoutTimer\n    var failureResponse = {\n        body: undefined,\n        headers: {},\n        statusCode: 0,\n        method: method,\n        url: uri,\n        rawRequest: xhr\n    }\n\n    if (\"json\" in options && options.json !== false) {\n        isJson = true\n        headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\") //Don't override existing accept header declared by user\n        if (method !== \"GET\" && method !== \"HEAD\") {\n            headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\") //Don't override existing accept header declared by user\n            body = JSON.stringify(options.json === true ? body : options.json)\n        }\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = loadFunc\n    xhr.onerror = errorFunc\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    xhr.onabort = function(){\n        aborted = true;\n    }\n    xhr.ontimeout = errorFunc\n    xhr.open(method, uri, !sync, options.username, options.password)\n    //has to be after open\n    if(!sync) {\n        xhr.withCredentials = !!options.withCredentials\n    }\n    // Cannot set timeout with sync request\n    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n    if (!sync && options.timeout > 0 ) {\n        timeoutTimer = setTimeout(function(){\n            if (aborted) return\n            aborted = true//IE9 may still call readystatechange\n            xhr.abort(\"timeout\")\n            var e = new Error(\"XMLHttpRequest timeout\")\n            e.code = \"ETIMEDOUT\"\n            errorFunc(e)\n        }, options.timeout )\n    }\n\n    if (xhr.setRequestHeader) {\n        for(key in headers){\n            if(headers.hasOwnProperty(key)){\n                xhr.setRequestHeader(key, headers[key])\n            }\n        }\n    } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error(\"Headers cannot be set on an XDomainRequest object\")\n    }\n\n    if (\"responseType\" in options) {\n        xhr.responseType = options.responseType\n    }\n\n    if (\"beforeSend\" in options &&\n        typeof options.beforeSend === \"function\"\n    ) {\n        options.beforeSend(xhr)\n    }\n\n    // Microsoft Edge browser sends \"undefined\" when send is called with undefined value.\n    // XMLHttpRequest spec says to pass null as body to indicate no body\n    // See https://github.com/naugtur/xhr/issues/100.\n    xhr.send(body || null)\n\n    return xhr\n\n\n}\n\nfunction getXml(xhr) {\n    // xhr.responseXML will throw Exception \"InvalidStateError\" or \"DOMException\"\n    // See https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseXML.\n    try {\n        if (xhr.responseType === \"document\") {\n            return xhr.responseXML\n        }\n        var firefoxBugTakenEffect = xhr.responseXML && xhr.responseXML.documentElement.nodeName === \"parsererror\"\n        if (xhr.responseType === \"\" && !firefoxBugTakenEffect) {\n            return xhr.responseXML\n        }\n    } catch (e) {}\n\n    return null\n}\n\nfunction noop() {}\n","var win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = isFunction\n\nvar toString = Object.prototype.toString\n\nfunction isFunction (fn) {\n  if (!fn) {\n    return false\n  }\n  var string = toString.call(fn)\n  return string === '[object Function]' ||\n    (typeof fn === 'function' && string !== '[object RegExp]') ||\n    (typeof window !== 'undefined' &&\n     // IE8 and below\n     (fn === window.setTimeout ||\n      fn === window.alert ||\n      fn === window.confirm ||\n      fn === window.prompt))\n};\n","var trim = function(string) {\n  return string.replace(/^\\s+|\\s+$/g, '');\n}\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  var headersArr = trim(headers).split('\\n')\n\n  for (var i = 0; i < headersArr.length; i++) {\n    var row = headersArr[i]\n    var index = row.indexOf(':')\n    , key = trim(row.slice(0, index)).toLowerCase()\n    , value = trim(row.slice(index + 1))\n\n    if (typeof(result[key]) === 'undefined') {\n      result[key] = value\n    } else if (isArray(result[key])) {\n      result[key].push(value)\n    } else {\n      result[key] = [ result[key], value ]\n    }\n  }\n\n  return result\n}\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}